import requests from bs4 import BeautifulSoup def get_keikyu_timetable(departure_station, arrival_station): # 京急の時刻表ページのURL url = f"https://www.keikyu.co.jp/ride/time/{departure_station}/" # リクエストを送信してページの内容を取得 response = requests.get(url) if response.status_code != 200: print("ページの取得に失敗しました。") return None # BeautifulSoupを使ってHTMLを解析 soup = BeautifulSoup(response.content, 'html.parser') # 時刻表の情報を抽出（ここは実際のページ構造に依存） timetable = [] for row in soup.select('table.timetable tr'): columns = row.find_all('td') if len(columns) >= 2: # 適切な列数を確認 time = columns[0].get_text(strip=True) destination = columns[1].get_text(strip=True) timetable.append((time, destination)) return timetable def main(): departure_station = "井土ヶ谷" arrival_station = "横浜" timetable = get_keikyu_timetable(departure_station, arrival_station) if not timetable: print("時刻表の取得に失敗しました。") return print(f"{departure_station}駅から{arrival_station}駅までの時刻表:") for time, destination in timetable: print(f"発車時刻: {time}, 行き先: {destination}") if __name__ == "__main__": main()
